# 播放列表管理功能实现说明

## 功能概述

本应用实现了完整的播放列表管理功能，支持M3U播放列表的导入、创建、管理和清空操作。

## 主要功能

### 1. 播放列表导入
- **M3U播放列表导入**：支持导入标准M3U格式的播放列表文件
- **路径兼容性**：支持绝对路径和相对路径的M3U文件
- **智能匹配**：自动匹配本地音乐文件与播放列表中的条目

### 2. 播放列表创建
- **自定义名称**：用户可以创建自定义名称的播放列表
- **快速创建**：通过对话框输入播放列表名称即可创建

### 3. 播放列表管理
- **查看所有播放列表**：显示已创建的所有播放列表
- **播放列表操作**：支持播放、重命名、删除播放列表
- **歌曲管理**：支持将歌曲添加到指定播放列表

### 4. 清空功能
- **清空当前列表**：一键清空当前播放列表中的所有歌曲
- **确认提示**：防止误操作，提供确认对话框

## 用户界面

### 横屏模式
- **播放列表管理区域**：位于界面右侧，包含以下按钮：
  - 添加单个音乐文件
  - 导入文件夹音乐
  - 导入M3U播放列表
  - 清空当前列表
  - 更多选项菜单

### 竖屏模式
- **底部管理按钮**：包含三个主要按钮：
  - 添加单个音乐文件
  - 导入文件夹音乐
  - 导入M3U播放列表

### 更多选项菜单
点击"更多选项"按钮弹出菜单，包含：
- 导入M3U播放列表
- 创建新播放列表
- 管理播放列表
- 清空当前列表

## 技术实现

### 文件格式支持
- **M3U格式**：支持标准M3U和M3U8格式
- **路径处理**：智能处理相对路径和绝对路径
- **编码兼容**：支持UTF-8编码的播放列表文件

### 数据存储
- **SharedPreferences**：使用SharedPreferences存储播放列表信息
- **歌曲关联**：通过歌曲ID关联播放列表与本地音乐文件
- **状态保存**：自动保存当前播放列表状态

### 权限处理
- **文件访问权限**：使用Storage Access Framework确保文件访问权限
- **兼容性**：支持Android 4.4及以上版本的文件访问

## 使用方法

### 导入播放列表
1. 点击"导入播放列表"按钮
2. 选择M3U格式的播放列表文件
3. 系统将自动创建同名播放列表并导入歌曲

### 创建播放列表
1. 点击"更多选项" → "创建新播放列表"
2. 输入播放列表名称
3. 点击"创建"按钮

### 管理播放列表
1. 点击"更多选项" → "管理播放列表"\2. 选择要操作的播放列表
3. 选择播放、重命名或删除操作

### 清空播放列表
1. 点击"清空当前列表"按钮
2. 确认清空操作

## 兼容性

- **Android版本**：支持Android 4.4 (API 19) 及以上版本
- **文件格式**：支持标准M3U播放列表格式
- **存储位置**：支持内部存储和外部存储的音乐文件

## 注意事项

1. **文件路径**：确保M3U文件中的音乐文件路径与实际存储位置一致
2. **文件扫描**：导入播放列表前，请确保音乐文件已扫描到应用中
3. **权限**：需要存储权限来访问音乐文件和播放列表文件